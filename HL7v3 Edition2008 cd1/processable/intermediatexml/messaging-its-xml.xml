<?xml version="1.0" encoding="UTF-8"?>
<!--<!DOCTYPE spec SYSTEM "..\..\support\dtd\v3m.dtd">-->
<!DOCTYPE xsl:stylesheet [
	<!ENTITY sect '&#xa7;'>
	<!ENTITY copy "©">
	<!ENTITY reg "®">
	<!ENTITY % v3ent_files SYSTEM "../../support/ent/v3m.ent">
	%v3ent_files;
]>
<!-- FIXIT Email addresses for the authors -->
<spec>
	<header ballotStatus="NormativeStandard" ballotNumber="7">
		<title>XML Implementable Technology Specification for V3 Structures</title>
		<version>1</version>
		<ballot type="Membership" number="2"/>
		<date>20040131</date>
		<authlist>
			<author>
				<role>Editor</role>
				<name>Matthew Stephens</name>
				<affiliation>Ramsey Systems Ltd</affiliation>
				<email href="matt@ramseysystems.co.uk" actuate="auto" show="embed" xlink-form="simple"/>
				<!-- FIXIT Email addresses for the authors -->
			</author>
			<author>
				<role>Co-Chair/Editor</role>
				<name>Charles McCay</name>
				<affiliation>Ramsey Systems Ltd</affiliation>
				<email href="charlie@ramseysystems.co.uk" actuate="auto" show="embed" xlink-form="simple"/>
				<!-- FIXIT Email addresses for the authors -->
			</author>
			<author>
				<role>Editor</role>
				<name>Dale Nelson</name>
				<affiliation>Zed-Logic Informatics, LLC</affiliation>
				<email href="dale@zed-logic.com" actuate="auto" show="embed" xlink-form="simple"/>
			</author>
			<author>
				<role>Editor</role>
				<name>Kai Heitmann</name>
				<affiliation>University of Cologne (DE) / Heitmann Consulting &amp; Services (NL)</affiliation>
				<email href="hl7@kheitmann.nl" actuate="auto" show="embed" xlink-form="simple"/>
			</author>
			<author>
				<role>Editor</role>
				<name>Paul Biron</name>
				<affiliation>Kaiser Permanente</affiliation>
				<email href="Paul.V.Biron@kp.org" actuate="auto" show="embed" xlink-form="simple"/>
			</author>
			<author>
				<role>Co-Chair</role>
				<name>Paul Knapp</name>
				<affiliation/>
				<email href="pknapp@continovation.com" actuate="auto" show="embed" xlink-form="simple"/>
			</author>
		</authlist>
		<!--	<legalese copyRightDate="2003" copyRightOwner="Health Level Seven, Inc." copyRightNotation="All rights reserved." renderer="RoseTree 2.8.61" renderNotation="This document was rendered into XML using software provided to HL7 by Beeler Consulting LLC." contactEmail="HQ@HL7.org" contactName="HL7 Headquarters Staff" contactNote="Comments or questions about this document may be may be addressed to:"/> -->
	</header>
	<front>
		<div1 id="acknowledgements">
			<head>Acknowledgements</head>
			<p>
				This standard is the result of over five years of intense work through e-mail, telephone conferences and meeting discussions. Wes Rishel (Gartner Group) was the principle author of previous drafts of DTDs for HMD-level elements and Version 3 Datatypes, Paul V. Biron (Kaiser Permanente), Skirmantas Kligys (Oracle),  Joey Coyle (Intermountain Healthcare),  Dale Nelson (Zed-Logic Informatics, LLC), Charlie McCay (Ramsey Systems Ltd) and Matthew Stephens (Ramsey Systems Ltd) continued this work, taking into account the use of W3c schema for XML processing. Important ideas have been contributed by Gunther Schadow, Bob Dolin (Kaiser Permanente), Vassil Peytchev (Epic), Mark Tucker (Regenstrief Institute), and George W. Beeler (Beeler consulting). Kai U. Heitmann (HL7 Germany) is the principle author of this document, and it was subsequently edited by Dale Nelson and Charlie McCay.  Matthew Stephens is the current editor of this document.
			</p>
		</div1>
		<div1 id="prerequisites">
			<head>Prerequisites</head>
			<p>
It is a prerequisite that readers have a general knowledge of XML technology. Readers unfamiliar with XML may gain the requisite knowledge from the following standards: 
				<list role="unordered">
					<item><loc href="http://www.w3.org/TR/2004/REC-xml11-20040204">XML 1.1</loc></item>
					<item><loc href="http://www.w3.org/XML/Schema">XML Schema</loc></item>
					<item><loc href="http://www.w3.org/TR/REC-xml-names">XML namespace</loc></item>
				</list>
			</p>
		</div1>
		<div1 id="assumptions">
			<head>Assumptions</head>
			<p>
It is assumed that the reader is familiar with HL7 version 3 terminology - especially those related to message definition (HL7 information model terminology, Message Instances, Message Types, Interactions, CMETs, wrappers, etc.).  For more information on these, refer to the V3 Guide
			</p>
		</div1>
		<div1 id="objective">
			<head>Document Objective</head>
			<p>
				The objective of this document is to present an Implementable Technology Specification (ITS) for the encoding rules for HL7 Version 3 messages based on the <loc href="http://www.w3.org/TR/2004/REC-xml11-20040204">Extensible Markup Language XML</loc>.
			</p>
			<p>
				Several XML encoding methods could serve as a messaging syntax for HL7 V3 messages. This document represents the method that is recommended by HL7, describing the underlying rules and principles. The corresponding data type descriptions necessary for this specification are described in the <xspecref spec="datatypes-its-xml" ref="" alt="Data Types XML ITS"/>.
			</p>
		</div1>
	</front>
	<body>
		<div1 id="Overview" ballotStatus="NormativeStandard">
			<head>Overview</head>
			<div2 id="scope">
				<head>Introduction and Scope</head>
				<p>
					This document describes how HL7 V3 compliant messages can be expressed using XML.  It describes how the definition of the set of valid XML instance documents is derived from a specific  HL7 Message Type.  It covers ISO levels 5 and 6.  Those familiar with V2 might call these the "XML encoding rules" for HL7 Version 3 messages.
				</p>
			</div2>
		</div1>
		<div1 id="mappingToXMLInstance" ballotStatus="NormativeStandard">
			<head>Mapping to the XML Instance</head>
			<p>
This section describes how an HL7 V3 Message Type can be represented in an XML instance document.   The representation is determined algorithmically from the HL7 Message Type definition.
			</p>
			<div2 id="overview">
				<head>Overview</head>
				<p>
For the purposes of this document, we will be referring to   HL7 V3 Message Types since they represent a fully specified, constrained, implementable definition of an HL7 V3 message in a serial tabular format.  However, one should recall that HL7 Message Types are derived from higher level message definitions such as HMDs and information models (RMIMs, etc).  All information contained in HL7 message types is ultimately derived from the V3 RIM.  Therefore, although the Message Type is useful for defining how to create an XML instance for a message or document in an algorithmic way, the semantics may be better understood by also looking at higher level representations.   For more information on HL7 V3 Message Types, HMDs, and RMIMs, please refer to the <xspecref spec="v3guide" ref="" alt="V3 Guide"/>.
					<list role="unordered">
						<item>The set of XML instances that are conformant for each message type described by an HMD has a structure with elements corresponding to class clones, and both element and attributes corresponding to class clone attributes.   HL7 structural attributes of the class clone are represented as XML attributes, all other HL7 attributes are represented as child elements in the XML instance.  The association names determine the names of the elements that represent the class clones.  </item>
						<item>Some Message Type definitions refer to CMETs.  This specification describes how embedded CMETs are encoded in a message instance as well.</item>
						<item>CDA documents are all derived from a single message type. </item>
						<item>To encode an HL7 message wrappers are defined to provide information both for message transmission (Transmission Wrapper) and for semantic interpretation (Control Act Wrapper).  An HL7 Interaction defines a complete message including the Message Type and associated Transmission Wrapper and Control Act Wrapper.  This specification describes how the wrappers are represented in an XML Message Instance.</item>
						<item>Each HL7 attribute has a Data Type associated with it.  The XML implementation of these data types is described in a companion document - the <xspecref spec="datatypes-its-xml" ref="" alt="XML ITS Data Types"/> <!-- insert link - done--></item>
					</list>
				</p>
			</div2>
			<div2 id="xmlStructures">
				<head>XML structures derived from an HMD</head>
				<p>
					The XML elements and attributes in a message instance correspond one-to-one with individual rows in the HMD with the root element representation for a transmission wrapper being the only exception.  This is explained in more detail below.
				</p>
				<p>
					Structural attributes like classCode, moodCode etc., are represented as XML attributes in the instance.  Where these have fixed values defined in the HMD, they may be omitted from the instance.  Where there is a default value, and the default is appropriate for the instance, the XML attribute may be omitted.  Where an XML attribute has been omitted the receiving system should assume the fixed or default value as specified in the HMD.  
				</p>
			</div2>
			<div2 id="useOfNamespaces">
				<head>Use of XML Namespaces</head>
				<p>
					All XML elements and attributes (except for informal extensions and the contents of ED datatypes)  are to be represented in the namespace defined by <code>"urn:hl7-org:v3"</code>. </p>
				<p> 
					Attributes "type" and "nil" from the xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" namespace may be used. The "type" attribute will be used to indicate the datatype of elements where this could be ambiguous.  
				</p>
				<p>	
							In this document all examples will be written with the assumption that <code>hl7</code> has been declared as a prefix for the hl7 namespace as follows: <code>xmlns:hl7="urn:hl7-org:v3"</code>.  Note that any valid namespace prefix (or none) may be used in practice.
				</p>
				<p>
					The use of namespaces within the ED datatype are discussed in the <xspecref spec="datatypes-its-xml" ref="" alt="XML ITS Data Types"/>.
				</p>
				<p>
					XML content from other namespaces (except within an ED datatype) will be assumed to be informal extensions as described later in this document and be ignored by receiving systems that do not recognize them.  
				</p>
			</div2>
			<div2 id="determination">
				<head>Determination of the XML representation </head>
				<div3 id="cardinality">
					<head>Cardinality</head>
					<p>
						For each row in the HMD representing a class, attribute, or association the cardinality in the HMD sets the upper and lower limits on the number of elements that may be included in the instance which correspond to that row.  Note that it is never possible to repeat structural attributes, and these are optional in the XML instances if a default or fixed value has been set.
					</p>
				</div3>
				<div3 id="messageElementsClasses">
					<head>Message Elements That Are HL7 Classes</head>
					<p>
					The name for the element representing the Class is taken either from the association name, or in the case of the root element representation for a transmission wrapper, from the InteractionID.
					</p>
					<p>
						Where the Class is flagged as Mandatory it must be included in the message for the message to be valid.  
					</p>
					<p>
						The XML representation of these elements are determined by the SRC column, whose value will be one of: "N", "R", "U", "I", or "C".
					</p>
					<div4 id="directContent">
						<head>Associations with direct content</head>
						<p>
							If the value of the SRC column is "N" or "R" then the XML representation will be a sequence of child elements, one for each HMD row of type "Attr" followed by one for each HMD row of type "Assoc" whose InMET column equals the Row column of the row in question. 
						</p>
						<p>
							Example:
						</p>
						<p>
							<graphic source="graphics/Ex1.jpg" xlink-form="simple" xml:attributes="href source" show="embed" actuate="auto"/>
							<br/>
							<graphic source="graphics/AssignedExcel.jpg" xlink-form="simple" xml:attributes="href source" show="embed" actuate="auto"/>
						</p>
						<p>
							<eg role="example" id="ITSExample2">
								
&lt;hl7:author typeCode="AUT" xmlns:hl7="urn:hl7-org:v3"&gt;
	&lt;hl7:assignedEntity classCode="ASSIGNED"&gt;
		&lt;hl7:id root="2.16.840.1.113883.2.1.4.2" extension="G0000017"/&gt;
		&lt;hl7:code code="008"/&gt;
	&lt;/hl7:assignedEntity&gt;
&lt;/hl7:author&gt;
							</eg>
						</p>
						
					</div4>
					<div4 id="choices">
						<head>Choices</head>
						<p>
							The preceding is true unless the value of OfMET contains a choice of more than one message element type. In this case, the XML representation represents the choice as a choice of one or more XML elements corresponding to those identified in the ofMET row.   Each element will have content derived as described in this section from the row in the HMD with that Element Name.
						</p>
						<p>
							If the value of the SRC column is “I” or “U” then the XML representation is the same as defined for the row in the HMD being referenced.  In  the case of “I” the content in the row must also be identical.
						</p>
						<p>
							Example:
						</p>
						<p>
							<graphic source="graphics/ExChoice.jpg" xlink-form="simple" xml:attributes="href source" show="embed" actuate="auto"/>
							<br/>
							<graphic source="graphics/ChoiceExcel.jpg" xlink-form="simple" xml:attributes="href source" show="embed" actuate="auto"/>
						</p>
						<p>
							<eg role="example" id="ITSExample3">
&lt;hl7:accountHolder xmlns:hl7="urn:hl7-org:v3"&gt;
	&lt;hl7:id root="AAAABBBB-1452-6352-7363-DEA51FEA5241"/&gt;
	&lt;hl7:heldAccountHolderPerson classCode="PSN" determinerCode="INSTANCE"&gt;
		&lt;hl7:name&gt;
			&lt;hl7:given&gt;Adam&lt;/hl7:given&gt;
			&lt;hl7:family&gt;Everyman&lt;/hl7:family&gt;
		&lt;/hl7:name&gt;
		&lt;hl7:addr&gt;
			&lt;hl7:streetAddressLine&gt;
                2222 Home Street
             &lt;/hl7:streetAddressLine&gt;
             &lt;hl7:city&gt;Ann Arbor&lt;/hl7:city&gt;
             &lt;hl7:state&gt;MI&lt;/hl7:state&gt;
             &lt;hl7:postalCode&gt;99999&lt;/hl7:postalCode&gt;
             &lt;hl7:country&gt;USA&lt;/hl7:country&gt;
		&lt;/hl7:addr&gt;
	&lt;/hl7:heldAccountHolderPerson&gt;
&lt;/hl7:accountHolder&gt;
							</eg>
						</p>
						
					</div4>
					<div4 id="cmets">
						<head>CMETs</head>
						<p>
							If the value of the SRC column is "C" (i.e., the HMD row is defined by a CMET) then the XML representation of the element is determined by applying the rules in “Message Elements That Are RIM Classes” to the requisite CMET found in the OfMET column.   
						</p>
						<p>
							If the value of the SRC column is “I” or “U” then the XML representation is the same as defined for the row in the HMD being referenced.  In  the case of “I” the content in the row must also be identical.
						</p>
						<p>
							Example:
						</p>
						<p>
							<graphic source="graphics/ExCMET.jpg" xlink-form="simple" xml:attributes="href source" show="embed" actuate="auto"/>
							<br/>
							<graphic source="graphics/CMETExcel.jpg" xlink-form="simple" xml:attributes="href source" show="embed" actuate="auto"/>
						</p>
						<p>
						<!-- reorder - done-->
						<eg role="example" id="ITSExample1">
&lt;hl7:contact xmlns:hl7="urn:hl7-org:v3"&gt;
	&lt;hl7:id root="AAAA1234-ADE1-543A-CFD4-DACE42D93FAC"/&gt;
	&lt;hl7:statusCode code="active"/&gt;
	&lt;hl7:telecom value="tel:+441234123456"/&gt;
	&lt;hl7:effectiveTime value="20040314"/&gt;
	&lt;hl7:contactPerson&gt;
		....
	&lt;/hl7:contactPerson&gt;
&lt;/hl7:contact&gt;
						</eg>
					</p>
					
					</div4>
				</div3>
				<div3 id="messageElementsAttributes">
					<head>Message Elements That Are HL7 Attributes</head>
					<p>
						HL7 structural attributes are conveyed as attributes.  Where there is a default or fixed value defined in the HL7 static model then the attribute may be omitted from the XML representation, and the receiving system will behave as though the fixed or default value was sent.  Note that according to the Refinements and Localization document "the default is a single value, once a default has been set, it may not be further constrained. Moreover, the assertion of default values may only be done by an HL7 Technical Committee as it prepares a ballot, or by an HL7 International Affiliate that is preparing a region-specific profile".  </p>
						<p>Non-structural attributes are represented as elements with the name taken from the “Element Name” in the HMD. The XML representation of these elements are determined by the <emph>OfMET</emph>. Specifically, for rows of type "Attr", the value of <emph>OfMET </emph>will be the name of a Version 3 Data Type, and hence, the XML representation will be as described in the <xspecref spec="datatypes-its-xml" ref="" alt="XML ITS Data Types"/>.  
					</p>
					<p>
						Example:
					</p>
					<p>
						<graphic source="graphics/Ex1.jpg" xlink-form="simple" xml:attributes="href source" show="embed" actuate="auto"/>
						<br/>
						<graphic source="graphics/AssignedExcel.jpg" xlink-form="simple" xml:attributes="href source" show="embed" actuate="auto"/>
					</p>
					<p>
						<eg role="example" id="ITSExample4">
&lt;hl7:author typeCode="AUT" xmlns:hl7="urn:hl7-org:v3"&gt;
	&lt;hl7:assignedEntity classCode="ASSIGNED"&gt;
		&lt;hl7:id root="2.16.840.1.113883.2.1.4.2" extension="G0000017"/&gt;
		&lt;hl7:code code="008"/&gt;
	&lt;/hl7:assignedEntity&gt;
&lt;/hl7:author&gt;
						</eg>
					</p>
					
				</div3>
				<div3 id="interactions">
					<head>Interactions</head>
					<p>
					Interactions are defined for HL7v3 messages, but are not relevant for CDA documents.  See the V3 Guide for further details on how and why interactions are defined and used.</p>
					<p>
						Interactions are represented by an XML element named using the artifact code for the interaction. The content model of this element is determined by the Message Type for the transmission wrapper.  
					</p>
					<p>
					Where the transmission wrapper contains a Control Act class, this class is replaced by the Control Act Message Type as specified for the interaction.   If the Control Act Message Type contains an entry point stub, then this is replaced by the Message Type for the payload as defined in the interaction.
					</p>
					<p>
						The Interaction element must have an attribute “ITSversion” that provides a version identifier for the XML ITS (Datatypes and Structures) that is to be used. 
					</p>
<!--					<p>
						Example:
					</p>
					<p>
						<eg role="example" id="ITSExample5">
						</eg>
					</p> -->
				</div3>
			</div2>
			<div2 id="informalExtensions">
				<head>Informal Extensions</head>
				<p>
					In order to support informal extensions as described in the <!-- need to find v3 conformance reference--><xspecref spec="conformance" ref="" alt="HL7 V3 Conformance and extensibility specification"/>, it is permitted to include additional XML elements and attributes that are not included in the HL7 definition of a message type.  These extensions should not change the meaning of any of the standard data items, and receiving applications must be able to safely ignore these elements.  
				</p>
						<p>
							When included in an instance local extensions MUST be in a namespace other than the HL7v3 namespace.  Such extensions must not be included within an ED datatype, since it would not always be possible to distinguish between foreign namespace items that form part of the content of the standard ED datatype, and content that was intended to be an informal extension.  Since all conformant content (outside of elements of type ED) is in the HL7 namespace, the sender can put any extension content into a foreign namespace (any namespace other than the HL7 namespace), and the receiver will be able to recognise that such content may be safely ignored. However, attributes in the xsi namespace should not be considered as foreign for the purposes of deciding whether content is an informal extension. Receiving systems must not report an error if such extensions are present.
						</p>
					<p>
							Example:
						</p>
					<p>
						<eg role="example" id="ITSExample6">
&lt;hl7:inFulfillmentOf xmlns:hl7="urn:hl7-org:v3"&gt;
   &lt;hl7:priorActRequest&gt;
       &lt;ex:MessageRequests
       	xmlns:ex="http://www.example.com/messaging"&gt;
            &lt;ex:RequestedMessage&gt;
            	    001-345-234
            &lt;/ex:RequestedMessage&gt;
       &lt;/ex:MessageRequests&gt;
    &lt;/hl7:priorActRequest&gt;
&lt;/hl7:inFulfillmentOf&gt;
						</eg>
					</p>
				
			</div2>
			<div2 id="compatibility">
				<head>Backwards and Forwards compatibility</head>
				<p>
					When there are different versions of either the abstract HL7 artifact definitions, or of the ITS, it is anticipated that these versions will be no more than a single <loc href="http://www.w3.org/TR/xslt">XSLT</loc> transform apart.  
				</p>
				<p>
					While setting the rules for version compatibility between different versions of the same HL7v3 artifact is beyond the scope of this specification, it is anticipated that it will be possible to generate <loc href="http://www.w3.org/TR/xslt">XSLT</loc> transformations to convert between versions.  There may be changes in valuesets for domains that need to be addressed in some other way, but again this is beyond the scope of an ITS specification.
				</p>
				<p>
					It is a constraint on the definition of future versions of the XML ITS that it must be possible to write an <loc href="http://www.w3.org/TR/xslt">XSLT</loc> transformation to map between instances of the same artifact created under the different versions of the ITS.
				</p>
			</div2>
			<div2 id="schemaProcessors">
				<head>The Use of Schema Processors</head>
					<p>Schema processing is not a conformance requirement although this specification has been designed to make schema processing beneficial. Where schemas are used receivers may use alternate schemas (including DTDs) than the ones provided by HL7. </p>
					<p>Sending applications should not provide schema location hints for the HL7 namespace and receiving applications that perform schema processing should ignore such hints if provided and instead should use whatever other means they have at their disposal to locate the relevant official HL7 schemas or their own customizations thereof. It is in the interest of the receivers own security and safety not to use sender supplied schemaLocation hints.</p>
			</div2>
		</div1>
		<div1 id="references" ballotStatus="Reference">
			<head>References</head>
			<p>
				<emph role="strong">[rfDatatypes1]</emph>
				<br/>
				<xspecref spec="datatypes" ref="" alt="HL7 Version 3 Data Types Abstract"/><br/>
				<!--<loc href="http://www.hl7.org/home/content/HTML-menus/datatypes1.htm">http://www.hl7.org/home/content/HTML-menus/datatypes1.htm</loc>-->
			</p>
			<p>
				<emph role="strong">[rfDatatypes2]</emph>
				<br/>
				<xspecref spec="datatypes-its-xml" ref="" alt="HL7 Version 3 ITS XML Data Types"/><br/>
				<!--<loc href="http://www.hl7.org/home/content/HTML-menus/datatypes2.htm">http://www.hl7.org/home/content/HTML-menus/datatypes2.htm</loc>-->
			</p>
			<p>
				<emph role="strong">[rfXMLschema]</emph>
				<br/>
				World Wide Web Consortium. <emph>XML Schema</emph>.<br/>
				<loc href="http://www.w3.org/TR/xmlschema-0">http://www.w3.org/TR/xmlschema-0</loc>
				<br/>
				<loc href="http://www.w3.org/TR/xmlschema-1">http://www.w3.org/TR/xmlschema-1</loc>
				<br/>
				<loc href="http://www.w3.org/TR/xmlschema-2">http://www.w3.org/TR/xmlschema-2</loc>
				<br/>
				World Wide Web Consortium. <emph>XML Schemas Part 1: Structures</emph>.<br/>
				<loc href="http://www.w3.org/TR/xmlschema-1">http://www.w3.org/TR/xmlschema-1</loc>
				<br/>
				World Wide Web Consortium. <emph>XML Schemas Part 2: Datatypes</emph>.<br/>
				<loc href="http://www.w3.org/TR/xmlschema-2">http://www.w3.org/TR/xmlschema-2</loc>
				<br/>
			</p>
			<p>
				<emph role="strong">[rfXML]</emph>
<!-- Change link to XML 1.1-->
				<br/>
				World Wide Web Consortium. <emph>Extensible Markup Language, 1.1 W3C Recommendation 04 February 2004</emph>.<br/>
				<loc href="http://www.w3.org/TR/2004/REC-xml11-20040204">http://www.w3.org/TR/2004/REC-xml11-20040204/</loc>
			</p>
			<p>
				<emph role="strong">[rfXMLnamespace]</emph>
				<br/>
				World Wide Web Consortium. <emph>Namespaces in XML</emph>.<br/>
				<loc href="http://www.w3.org/TR/REC-xml-names">http://www.w3.org/TR/REC-xml-names</loc>
			</p>
			<p>
				<emph role="strong">[rfXPath] </emph>
				<br/>
				World Wide Web Consortium. <emph>XML Path Language</emph>.<br/>
				<loc href="http://www.w3.org/TR/xpath">http://www.w3.org/TR/xpath</loc>
			</p>
			<p>
				<emph role="strong">[rfXSLT]</emph>
				<br/>
				World Wide Web Consortium. <emph>XSL Transformations (XSLT)</emph>.<br/>
				<loc href="http://www.w3.org/TR/xslt">http://www.w3.org/TR/xslt</loc>
			</p>
			<p>
				<emph role="strong">[rfV3guide]</emph>
				<br/>
				Version 3 Guide.<br/>
				<ilxspecref spec="&v3guidefile;">Version 3 Guide (Normative Edition 2006)</ilxspecref>
				<!--<loc href="http://www.hl7.org/home/content/HTML-menus/V3Guide.htm">http://www.hl7.org/home/content/HTML-menus/V3Guide.htm </loc>-->
			</p>
			<p>
				<emph role="strong">{rfV3Glossary}</emph>
				<br/>
				<xspecref spec="glossary" ref="" alt="Version 3 Glossary"/><br/>
			</p>
		</div1>
		<div1 id="appendixA" ballotStatus="Reference">
			<head>Appendix A</head>
			<div2 id="exampleInstance">
				<head>Example Instance for an Interaction</head>
				<p>
				The following is an example instance for the interaction <artref ref="PRPA_IN403001" alt="PRPA_IN040301"/> taken from the emergency encounter topic in the patient administration domain.
					<eg role="example" id="ITSExample7">
&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;!--Example copyright 2004 by Health Level Seven, Inc. --&gt;
&lt;!-- Example message for PRPA_IN403001 - Emergency
	Encounter Started interaction --&gt;
&lt;hl7:PRPA_IN403001 xmlns:hl7="urn:hl7-org:v3"&gt;
   &lt;hl7:id root="2.16.840.1.113883.1.6"
      extension="1-976-245"
      displayable="true"/&gt;
   &lt;hl7:creationTime value="20040927100100"/&gt;
   &lt;hl7:versionCode code="V3PR1"/&gt;
   &lt;hl7:interactionId root=" 2.16.840.1.113883.2.1.3.2.4.12"
      extension=" PRPA_IN403001" displayable="true"/&gt;
   &lt;hl7:processingCode code="P"/&gt;
   &lt;hl7:processingModeCode code="T"/&gt;
   &lt;hl7:acceptAckCode code="AL"/&gt;
   &lt;hl7:receiver&gt;
      &lt;hl7:device&gt;
         &lt;hl7:id root="2.16.840.1.113883.19.3.2408"
            extension="123" displayable="true"/&gt;
         &lt;hl7:name use="L"&gt;
            &lt;hl7:given&gt;Good Health Lab System&lt;/hl7:given&gt;
         &lt;/hl7:name&gt;
      &lt;/hl7:device&gt;
   &lt;/hl7:receiver&gt;
   &lt;hl7:sender&gt;
      &lt;hl7:device&gt;
         &lt;hl7:id root="2.16.840.1.113883.19.3.2409"
            extension="456" displayable="true"/&gt;
         &lt;hl7:name use="L"&gt;
            &lt;hl7:given&gt;
               Good Health Patient Admin System
            &lt;/hl7:given&gt;
         &lt;/hl7:name&gt;
      &lt;/hl7:device&gt;
   &lt;/hl7:sender&gt;
&lt;!-- ControlAct starts here --&gt;
   &lt;hl7:controlActProcess&gt;
      &lt;hl7:code code="PRPA_TE403001"
         codeSystem="2.16.840.1.113883.5.4"
         codeSystemName="HL7TriggerEventCode"/&gt;
      &lt;hl7:effectiveTime value="20040927095000"/&gt;
      &lt;hl7:authorOrPerformer typeCode="AUT"&gt;
         &lt;hl7:assignedEntity classCode="PRS"&gt;
            &lt;hl7:id root="2.16.840.1.113883.19.3.2409"
               extension="10001" displayable="true"/&gt;
            &lt;hl7:telecom value="tel:+1(955)555-1005" use="MC"/&gt;
            &lt;hl7:telecom value="mailto:admit@eg.net"/&gt;
            &lt;hl7:assignee&gt;
               &lt;hl7:assigneePerson&gt;
                  &lt;hl7:name use="L"&gt;
                     &lt;hl7:given&gt;Eric&lt;/hl7:given&gt;
                     &lt;hl7:family&gt;Emergency&lt;/hl7:family&gt;
                  &lt;/hl7:name&gt;
               &lt;/hl7:assigneePerson&gt;
            &lt;/hl7:assignee&gt;
         &lt;/hl7:assignedEntity&gt;
      &lt;/hl7:authorOrPerformer&gt;
      &lt;hl7:dataEnterer&gt;
         &lt;hl7:time value="20040927100000"/&gt;
         &lt;hl7:assignedEntity classCode="PRS"&gt;
            &lt;hl7:id root="2.16.840.1.113883.19.3.2409"
               extension="10055" displayable="true"/&gt;
            &lt;hl7:assignee&gt;
               &lt;hl7:assigneePerson&gt;
                  &lt;hl7:name use="L"&gt;
                     &lt;hl7:given&gt;Christopher&lt;/hl7:given&gt;
                     &lt;hl7:family&gt;Clerk&lt;/hl7:family&gt;
                  &lt;/hl7:name&gt;
               &lt;/hl7:assigneePerson&gt;
            &lt;/hl7:assignee&gt;
         &lt;/hl7:assignedEntity&gt;
      &lt;/hl7:dataEnterer&gt;
      &lt;hl7:subject&gt;
&lt;!--Example payload for Emergency Encounter Started
   (PRPA_MT403001) --&gt;
         &lt;hl7:encounterEvent&gt;
            &lt;hl7:id root="2.16.840.1.113883.19.3.2409"
               extension="12345" displayable="true"/&gt;
            &lt;hl7:code code="EMER"
               codeSystem="2.16.840.1.113883.5.4"
               codeSystemName="ActCode" displayName="emergency"/&gt;
            &lt;hl7:statusCode code="active"/&gt;
            &lt;hl7:effectiveTime&gt;
               &lt;hl7:low value="20040927095000" inclusive="true"/&gt;
            &lt;/hl7:effectiveTime&gt;
            &lt;hl7:priorityCode code="EM"
               codeSystem="2.16.840.1.113883.5.7"
               codeSystemName="ActPriority"
               displayName="emergency"/&gt;
            &lt;hl7:confidentialityCode code="N"
               codeSystem="2.16.840.1.113883.5.25"
               codeSystemName="Confidentiality"
               displayName="normal"/&gt;
            &lt;hl7:reasonCode code="MEDNEC"
               codeSystem="2.16.840.1.113883.5.8"
               codeSystemName="ActReason"
               displayName="Medical_Necessity"/&gt;
            &lt;hl7:admissionReferralSourceCode code="7"
               codeSystem="2.16.840.1.113883.5.39"
               codeSystemName="EncounterReferralSource"
               displayName="Emergency_Room"/&gt;
            &lt;hl7:specialCourtesiesCode code="NRM"
               codeSystem="2.16.840.1.113883.5.40"
               codeSystemName="EncounterSpecialCourtesy"
               displayName="norrmal_courtesy"/&gt;
            &lt;hl7:subject&gt;
               &lt;hl7:patient&gt;
                  &lt;hl7:id root="2.16.840.1.113883.19.3.2409"
                     extension="444551234" displayable="true"/&gt;
                  &lt;hl7:addr use="HP"&gt;
                     &lt;hl7:streetAddressLine&gt;
                        2222 Home Street
                     &lt;/hl7:streetAddressLine&gt;
                     &lt;hl7:city&gt;Ann Arbor&lt;/hl7:city&gt;
                     &lt;hl7:state&gt;MI&lt;/hl7:state&gt;
                     &lt;hl7:postalCode&gt;99999&lt;/hl7:postalCode&gt;
                     &lt;hl7:country&gt;USA&lt;/hl7:country&gt;
                  &lt;/hl7:addr&gt;
                  &lt;hl7:patientLivingSubject&gt;
                     &lt;hl7:birthplace&gt;
                        &lt;hl7:addr use="BIR"&gt;
                           Ann Arbor, MI USA
                        &lt;/hl7:addr&gt;
                     &lt;/hl7:birthplace&gt;
                     &lt;hl7:name&gt;Adam A Everyman&lt;/hl7:name&gt;
                     &lt;hl7:administrativeGenderCode code="M"
                        codeSystem="2.16.840.1.113883.5.1"
                        codeSystemName="AdministrativeGender"
                        displayName="Male"/&gt;
                     &lt;hl7:birthTime value="19550304"/&gt;
                  &lt;/hl7:patientLivingSubject&gt;
                  &lt;hl7:providerOrganization&gt;
                     &lt;hl7:id root="2.16.840.1.113883.19.3.2409"
                        extension="1-976-245" displayable="true"/&gt;
                     &lt;hl7:name use="L"&gt;
                        &lt;hl7:suffix qualifier="LS"&gt;
                           Inc.
                        &lt;/hl7:suffix&gt;
                        Good Health Hospital
                     &lt;/hl7:name&gt;
                     &lt;hl7:addr use="HP"&gt;
                        &lt;hl7:streetAddressLine&gt;
                           2222 Hospital Street
                        &lt;/hl7:streetAddressLine&gt;
                        &lt;hl7:city&gt;Ann Arbor&lt;/hl7:city&gt;
                        &lt;hl7:state&gt;MI&lt;/hl7:state&gt;
                        &lt;hl7:postalCode&gt;99999&lt;/hl7:postalCode&gt;
                        &lt;hl7:country&gt;USA&lt;/hl7:country&gt;
                     &lt;/hl7:addr&gt;
                  &lt;/hl7:providerOrganization&gt;
               &lt;/hl7:patient&gt;
            &lt;/hl7:subject&gt;
            &lt;hl7:admitter&gt;
               &lt;hl7:time&gt;
                  &lt;hl7:low value="20040927095000"
                     inclusive="true"/&gt;
               &lt;/hl7:time&gt;
               &lt;hl7:assignedPerson classCode="PRS"&gt;
                  &lt;hl7:id root="2.16.840.1.113883.19.3.2409"
                     extension="10001" displayable="true"/&gt;
                  &lt;hl7:telecom value="tel:+1(955)555-1005"
                     use="MC"/&gt;
                  &lt;hl7:telecom value="mailto:admit@eg.net"/&gt;
                  &lt;hl7:assignee&gt;
                     &lt;hl7:assigneePerson&gt;
                        &lt;hl7:name use="L"&gt;
                           &lt;hl7:given&gt;Eric&lt;/hl7:given&gt;
                           &lt;hl7:family&gt;Emergency&lt;/hl7:family&gt;
                        &lt;/hl7:name&gt;
                     &lt;/hl7:assigneePerson&gt;
                  &lt;/hl7:assignee&gt;
               &lt;/hl7:assignedPerson&gt;
            &lt;/hl7:admitter&gt;
            &lt;hl7:attender&gt;
               &lt;hl7:time&gt;
                  &lt;hl7:low value="20030927095000"
                     inclusive="true"/&gt;
               &lt;/hl7:time&gt;
               &lt;hl7:statusCode code="active"/&gt;
               &lt;hl7:assignedPerson classCode="PRS"&gt;
                  &lt;hl7:id root="2.16.840.1.113883.19.3.2409"
                     extension="10001" displayable="true"/&gt;
                  &lt;hl7:telecom value="tel:+1(955)555-1006"
                     use="MC"/&gt;
                  &lt;hl7:telecom value="mailto:attend@eg.net"/&gt;
                  &lt;hl7:assignee&gt;
                     &lt;hl7:assigneePerson&gt;
                        &lt;hl7:name use="L"&gt;
                           &lt;hl7:given&gt;Eric&lt;/hl7:given&gt;
                           &lt;hl7:family&gt;Emergency&lt;/hl7:family&gt;
                        &lt;/hl7:name&gt;
                     &lt;/hl7:assigneePerson&gt;
                  &lt;/hl7:assignee&gt;
               &lt;/hl7:assignedPerson&gt;
            &lt;/hl7:attender&gt;
            &lt;hl7:location&gt;
               &lt;hl7:time&gt;
                  &lt;hl7:low value="20040927095000"
                     inclusive="true"/&gt;
               &lt;/hl7:time&gt;
               &lt;hl7:statusCode code="active"/&gt;
               &lt;hl7:serviceDeliveryLocation&gt;
                  &lt;hl7:code code="ER"
                     codeSystem="2.16.840.1.113883.5.111"
                     codeSystemName="RoleCode"
                     displayName="Emergency_room"/&gt;
                  &lt;hl7:statusCode code="active"/&gt;
                  &lt;hl7:location&gt;
                     &lt;hl7:name&gt;ER - Room 4 - Bed B&lt;/hl7:name&gt;
                  &lt;/hl7:location&gt;
               &lt;/hl7:serviceDeliveryLocation&gt;
            &lt;/hl7:location&gt;
            &lt;hl7:notificationContact&gt;
               &lt;hl7:notificationParty&gt;
                  &lt;hl7:id root="2.16.840.1.113883.19.3.2409"
                     extension="1-976-245" displayable="false"/&gt;
                  &lt;hl7:addr use="HP"&gt;
                     &lt;hl7:streetAddressLine&gt;
                        5555 Home Street
                     &lt;/hl7:streetAddressLine&gt;
                     &lt;hl7:city&gt;Ann Arbor&lt;/hl7:city&gt;
                     &lt;hl7:state&gt;MI&lt;/hl7:state&gt;
                     &lt;hl7:postalCode&gt;99999&lt;/hl7:postalCode&gt;
                     &lt;hl7:country&gt;USA&lt;/hl7:country&gt;
                  &lt;/hl7:addr&gt;
                  &lt;hl7:telecom value="tel:+1(555)555-2010"
                     use="H"/&gt;
                  &lt;hl7:contactParty&gt;
                     &lt;hl7:Person&gt;
                        &lt;hl7:id root="2.16.840.1.113883.19.3.2409"
                           extension="1-976-245" displayable="false"/&gt;
                        &lt;hl7:name use="L"&gt;
                           &lt;hl7:given&gt;Carrie&lt;/hl7:given&gt;
                           &lt;hl7:given&gt;C&lt;/hl7:given&gt;
                           &lt;hl7:family&gt;Contact&lt;/hl7:family&gt;
                        &lt;/hl7:name&gt;
                        &lt;hl7:administrativeGenderCode code="F"
                           codeSystem="2.16.840.1.113883.5.1"
                           codeSystemName="AdministrativeGender"
                           displayName="Female"/&gt;
                     &lt;/hl7:Person&gt;
                  &lt;/hl7:contactParty&gt;
               &lt;/hl7:notificationParty&gt;
            &lt;/hl7:notificationContact&gt;
            &lt;hl7:pertinentInformation1&gt;
               &lt;hl7:valuablesLocation negationInd="false"&gt;
                  &lt;hl7:text mediaType="text/plain"&gt;
                     Mr. Everyman's valuables were checked into
                     patient valuables location ER-3.
                  &lt;/hl7:text&gt;
                  &lt;hl7:value mediaType="text/plain"&gt;
                     Mr. Everyman arrived with a wedding ring,
                     a Timex watch, a wallet with $35 and an
                     American Express credit card, and a set of
                     house and car keys. These items were stored
                     for safekeeping during his stay.
                   &lt;/hl7:value&gt;
               &lt;/hl7:valuablesLocation&gt;
            &lt;/hl7:pertinentInformation1&gt;
            &lt;hl7:pertinentInformation2&gt;
               &lt;hl7:priorityNumber value="1"/&gt;
               &lt;hl7:observationDx negationInd="false"&gt;
                  &lt;hl7:code code="ADMDX"
                     codeSystem="2.16.840.1.113883.5.4"
                     codeSystemName="ActCode"
                     displayName="admitting_diagnosis"/&gt;
                  &lt;hl7:statusCode code="active"/&gt;
                  &lt;hl7:value code="518.82"
                     codeSystem="2.16.840.1.113883.5"
                     codeSystemName="ICD9" codeSystemVersion="9"
                     displayName="Acute Respiratory Distress"/&gt;
               &lt;/hl7:observationDx&gt;
            &lt;/hl7:pertinentInformation2&gt;
            &lt;hl7:arrivedBy contextControlCode="OP"
                  contextConductionInd="true" typeCode="ARR"&gt;
               &lt;hl7:transportationEvent moodCode="EVN"&gt;
                  &lt;hl7:text mediaType="text/plain"&gt;
                     Ambulance
                  &lt;/hl7:text&gt;
               &lt;/hl7:transportationEvent&gt;
            &lt;/hl7:arrivedBy&gt;
         &lt;/hl7:encounterEvent&gt;
      &lt;/hl7:subject&gt;
   &lt;/hl7:controlActProcess&gt;
&lt;/hl7:PRPA_IN403001&gt;            	</eg>
				</p>
			</div2>
		</div1>
		<div1 id="appendixB" ballotStatus="Reference">
			<head>Appendix B</head>
			<div2 id="structuralAttribues">
				<head>RIM structural attributes</head>
				<p>
					The RIM structural attributes are enumerated below.
					<table>
						<tbody>
							<tr>
								<td>Act</td>
								<td>moodCode</td>
							</tr>
							<tr>
								<td>Act</td>
								<td>classCode</td>
							</tr>
							<tr>
								<td>Act</td>
								<td>negationInd</td>
							</tr>
							<tr>
								<td>Act</td>
								<td>levelCode</td>
							</tr>
							<tr>
								<td>ActRelationship</td>
								<td>typeCode</td>
							</tr>
							<tr>
								<td>ActRelationship</td>
								<td>ActRelationship	inversionInd</td>
							</tr>
							<tr>
								<td>ActRelationship</td>
								<td>contextControlCode</td>
							</tr>
							<tr>
								<td>ActRelationship</td>
								<td>contextConductionInd</td>
							</tr>
							<tr>
								<td>ActRelationship</td>
								<td>negationInd</td>
							</tr>
							<tr>
								<td>Entity</td>
								<td>classCode</td>
							</tr>
							<tr>
								<td>Entity</td>
								<td>determinerCode</td>
							</tr>
							<tr>
								<td>Participation</td>
								<td>typeCode</td>
							</tr>
							<tr>
								<td>Participation</td>
								<td>contextControlCode</td>
							</tr>
							<tr>
								<td>Role</td>
								<td>classCode</td>
							</tr>
							<tr>
								<td>Role</td>
								<td>negationInd</td>
							</tr>
							<tr>
								<td>RoleLink</td>
								<td>typeCode</td>
							</tr>
						</tbody>
					</table>
				</p>
			</div2>
		</div1>
	</body>
</spec>
